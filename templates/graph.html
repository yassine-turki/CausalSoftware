{% extends 'base.html' %}

{% block head %}
<title>Causal Discovery</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link href = "https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js">
<link href = "https://use.fontawesome.com/releases/v5.7.2/css/all.css">
{% endblock %}

{% block body %}
  <br><br>
  <ul class="breadcrumb">
    <li><a href="../">Generator</a></li>
    <li>Editor</li>
    <li><a href="/run_metrics">Metrics</a></li>
    <li style = "text-align: right;">
    {% if session.name %}
         <a href="/logout">Logout</a>.
      {% else %}
        You are not registered. <a href="/login">login</a>.
    {% endif %}
    </li>
  </ul>
  <h1 style="text-align: center; color: aliceblue">Graph Editor</h1>
  <div class="container"> 
         <div class="row d-flex justify-content-center text-center mt-5">
               <div class="col-12 col-md-8 col-lg-6 col-xl-5">
                  <div class="card py-3 px-2">
                     <form class="myform" method="POST" action="/run_script">
                        {% if is_image %}
                           <br>
                           <label for="add_edge_start" style = "font-weight: bold;">Add edge starting point:</label><br>
                           <input type="text" id="add_edge_start" name="add_edge_start"><br>
                           <br>
                           <label for="add_edge_end" style = "font-weight: bold;">Add edge ending point:</label><br>
                           <input type="text" id="add_edge_end" name="add_edge_end"><br> 
                           <br>
                           <label for="delete_edge_start" style = "font-weight: bold;">Delete edge starting point:</label><br>
                           <input type="text" id="delete_edge_start" name="delete_edge_start"><br>
                           <br>
                           <label for="delete_edge_end" style = "font-weight: bold;">Delete edge ending point:</label><br>
                           <input type="text" id="delete_edge_end" name="delete_edge_end"><br> 
                           <br>
                        {% endif %}
                        <div class="form-group mt-3">
                           <input type="submit" class="btn btn-block btn-primary btn-lg" value="Generate">
                        </div>
                     </form>
                  </div>  
               </div>
            <div class = "generated_image col-12 col-md-8 col-lg-6 col-xl-5">
               <!-- <img src="{{ url_for('static', filename = 'image.png') }}" > -->
               <img id="image" src="/image" >
               <script>
                 // Create a timestamp
                 var timestamp = new Date().getTime();
          
                 // Get the image element
                 var image = document.getElementById("image");
          
                 // Adding the timestamp parameter to image src
                 image.src="/image?t=" + timestamp;
                 console.log(image.src);
               </script>
             </div>
         </div> 
    
 </div>   
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
{% endblock %}

